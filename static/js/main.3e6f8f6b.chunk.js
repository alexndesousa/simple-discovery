(this["webpackJsonpsimple-discovery"]=this["webpackJsonpsimple-discovery"]||[]).push([[0],{126:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),o=n.n(i),c=(n(81),n(9)),l=n(12),s=n.n(l),u=function(e,t){for(var n=[],a=0;a<e.length;a+=t)n.push(e.slice(a,a+t));return n},m=n(65),d=n.n(m),f=n(66),h=n.n(f),g="https://api.spotify.com/v1",p=function(e,t){var n=g+"/artists/"+e+"/related-artists";return s.a.get(n,{headers:t}).then((function(e){return e.data.artists.map((function(e){return e.id}))}))},b=function(e,t){return s.a.get(g+"/me",{headers:e}).then((function(e){var n={username:e.data.display_name,id:e.data.id,email:e.data.email,country:e.country};t(n)}))},y=function(e,t){return s.a.get(g+"/me/playlists?limit=50",{headers:e}).then((function(e){console.log("response from playlists",e.data);var n=e.data.items.map((function(e){return{name:e.name,id:e.id,image:e.images[0].url}}));t(n),console.log("formatted data",n)}))},v=function(e,t,n,a){var r=g+"/search?q="+encodeURIComponent(e)+"&type="+encodeURIComponent("artist");return s.a.get(r,{headers:t}).then((function(e){var t=e.data.artists.items.map((function(e){return{name:e.name,id:e.id,image:void 0!==e.images[0]?e.images[0].url:h.a}}));n(t),a(!1)})).catch((function(e){console.log(e)}))},E=function(e,t,n,a){var r=g+"/search?q="+encodeURIComponent(e)+"&type="+encodeURIComponent("track");return s.a.get(r,{headers:t}).then((function(e){console.log("SONG SEARCH RESPONSE",e);var t=e.data.tracks.items.map((function(e){return{name:e.name,id:e.id,artist:e.artists[0].name,artist_id:e.artists[0].id,image:e.album.images[0].url}}));n(t),a(!1)})).catch((function(e){console.log(e)}))},j=p,O=function(e,t,n){var a=[],r=new d.a({maxConcurrent:4,minTime:500}),i=e.map((function(e){return r.schedule((function(){return s.a.get("https://api.spotify.com/v1/artists/"+e+"/top-tracks?country=GB",{headers:t}).then((function(e){var t=e.data.tracks.map((function(e){return e.uri}));a=a.concat(t)}))}))}));return Promise.all(i).then((function(){return n(a),a}))},S=function(e,t){e["Content-Type"]="application/json";return s.a.post("https://api.spotify.com/v1/users/alex31734/playlists",{name:"Simple discovery test",description:"just a simple test"},{headers:e}).then((function(e){return t(e.data.id),e.data.id}))},k=function(e,t,n){console.log("final allSongs",e);var a=u(e,100).map((function(e){return console.log("songBundle",e),s.a.post(g+"/playlists/"+t+"/tracks",{uris:e},{headers:n}).then((function(e){return e}))}));return Promise.all(a)},C=function(e,t){console.log("artistIDs",e);var n=[],a=[],r=e.map((function(e){return s.a.get(g+"/artists/"+e+"/albums",{headers:t}).then((function(e){var t=e.data.items.map((function(e){return e.id}));return n.length+t.length<=20?n=n.concat(t):(a.push(n),n=[].concat(t)),e}))}));return Promise.all(r).then((function(e){return a.push(n),console.log("response from getting all artists albums",e),console.log("getting all artists albums",a),a}))},I=function(e,t){var n=[],a=e.map((function(e){return s.a.get(g+"/albums/?ids="+e.toString(),{headers:t}).then((function(e){var t=e.data.albums.map((function(e){return e.tracks.items.map((function(e){return e.id}))}));return n=n.concat(t.flat()),e}))}));return Promise.all(a).then((function(e){return console.log("response form getting all trakcs",e),console.log("contents of allTracks",n),console.log("chunked array ",u(n,100)),u(n,100)}))},P=function(e,t){var n=[],a=e.map((function(e){return s.a.get(g+"/audio-features/?ids="+e.toString(),{headers:t}).then((function(e){return n=n.concat(e.data.audio_features),e}))}));return Promise.all(a).then((function(e){return console.log("response from all audio features ",e),console.log("final audio features: ",n),n}))},w=function(e,t){return s.a.get(g+"/audio-features/"+encodeURIComponent(e),{headers:t}).then((function(e){return console.log("response for getting single audioFeature",e),console.log("response for getting single audioFeature",e.data),e.data}))},x=function(e,t){return s.a.get(g+"/playlists/"+e,{headers:t}).then((function(e){return console.log("number of tracks",e.data.tracks.total),e.data.tracks.total}))},U=function(e,t,n){for(var a=[],r=[],i=0;i<t;i+=100)r.push(s.a.get(g+"/playlists/"+e+"/tracks?offset="+i,{headers:n}).then((function(e){var t=e.data.items.map((function(e){return e.track.artists[0].id})).filter((function(e,t,n){return n.indexOf(e)===t}));return a=a.concat(t),e})));return Promise.all(r).then((function(e){return console.log("response from all playlist tracks getting",e),console.log("all playlist track getting ",a),a}))},R=function(e,t){var n=[],a=e.map((function(e){return p(e,t).then((function(e){return n=n.concat(e),e}))}));return Promise.all(a).then((function(){var e=n.filter((function(e,t,n){return n.indexOf(e)===t}));return console.log("response from the promises for multiple similar artists NO DUPLICATES",e),e}))},_=function(e){var t=e.header,n=e.setUserData,i=e.setUserPlaylists;return Object(a.useEffect)((function(){null!==t&&b(t,n).then((function(){y(t,i)})).catch((function(e){console.log(e)}))}),[t,i,n]),r.a.createElement("div",null,"your profile information:")},N=n(21),M=n(158),T=n(164),V=n(165),z=n(167),L=n(166),A=n(163),D=n(168),F=n(172),B=n(162),G=Object(M.a)((function(e){return{paper:{position:"absolute",maxWidth:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),H=function(e){var t=e.open,n=e.handleClose,a=e.isPlaylistCreated,i=G();return r.a.createElement("div",null,r.a.createElement(F.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:t,onClose:n,style:{display:"flex",alignItems:"center",justifyContent:"center"}},a?r.a.createElement("div",{className:i.paper},r.a.createElement("h2",null,"Playlist created")):r.a.createElement("div",{className:i.paper},r.a.createElement("h2",{id:"simple-modal-title"},"Generating playlist"),r.a.createElement("div",{align:"center"},r.a.createElement(B.a,null)))))},W=Object(M.a)({card:{maxWidth:345},media:{height:140}}),q=function(e){var t=e.id,n=e.image,a=e.name,i=e.functionToExecute,o=e.isPlaylistCreated,l=W(),s=r.a.useState(!1),u=Object(c.a)(s,2),m=u[0],d=u[1];return r.a.createElement(A.a,{item:!0,align:"center"},r.a.createElement(T.a,{className:l.card,onClick:function(){i.apply(void 0,Object(N.a)(t)),d(!0)}},r.a.createElement(H,{open:m,handleClose:function(){d(!1)},isPlaylistCreated:o}),r.a.createElement(V.a,null,r.a.createElement(L.a,{className:l.media,image:n,title:a}),r.a.createElement(z.a,null,r.a.createElement(D.a,{variant:"h5",component:"h2"},a)))))},J=function(e){var t=e.musicItems;return r.a.createElement(A.a,{container:!0,direction:"column",justify:"center",alignItems:"stretch",spacing:2,style:{minHeight:"80vh",margin:"0",width:"100%"}},t)},K=n(171),Q=n(169),X=function(e){var t=e.searchLabel,n=e.newSearch,i=e.handleSearch,o=e.header,l=e.setValues,s=e.type,u=null;u="song"===s?E:v;var m=Object(a.useState)(!1),d=Object(c.a)(m,2),f=d[0],h=d[1],g=function(){h(!0)};return Object(a.useEffect)((function(){null!==o&&f&&u(n,o,l,h)}),[n,o,l,f]),r.a.createElement(A.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,style:{margin:"0",width:"100%"}},r.a.createElement(K.a,{id:"filled-basic",label:t,margin:"normal",variant:"filled",value:n,onChange:i,onKeyPress:function(e){"Enter"===e.key&&g()}}),r.a.createElement(Q.a,{variant:"contained",onClick:function(){return g()}},"search"))},Y=n(170),Z=n(39),$=n.n(Z),ee=Object(M.a)({back_button:{left:"10%"}}),te=function(e){var t=e.isPageVisible,n=e.togglePage,a=e.toggleMainMenu,i=e.searchLabel,o=e.newSearch,c=e.handleSearch,l=e.header,s=e.setValues,u=e.type,m=e.musicItems,d=ee();return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",null,r.a.createElement(Y.a,{className:d.back_button,onClick:function(){n(),a()}},r.a.createElement($.a,{fontSize:"large"})),r.a.createElement(X,{searchLabel:i,newSearch:o,handleSearch:c,header:l,setValues:s,type:u}),r.a.createElement(J,{musicItems:m})):null)},ne=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(""),l=Object(c.a)(o,2),s=l[0],u=l[1],m=Object(a.useState)([]),d=Object(c.a)(m,2),f=d[0],h=d[1],g=Object(a.useState)([]),p=Object(c.a)(g,2),b=p[0],y=p[1],v=Object(a.useState)([]),E=Object(c.a)(v,2),N=(E[0],E[1]),T=Object(a.useState)([]),V=Object(c.a)(T,2),z=V[0],L=V[1],D=Object(a.useState)(""),F=Object(c.a)(D,2),B=(F[0],F[1]),G=Object(a.useState)([]),H=Object(c.a)(G,2),W=(H[0],H[1]),K=Object(a.useState)(!1),X=Object(c.a)(K,2),Z=X[0],ee=X[1],ne=Object(a.useState)(null),ae=Object(c.a)(ne,2),re=ae[0],ie=ae[1],oe=Object(a.useState)(""),ce=Object(c.a)(oe,2),le=(ce[0],ce[1]),se=Object(a.useState)(!0),ue=Object(c.a)(se,2),me=ue[0],de=ue[1],fe=Object(a.useState)(!0),he=Object(c.a)(fe,2),ge=he[0],pe=he[1],be=Object(a.useState)(!1),ye=Object(c.a)(be,2),ve=ye[0],Ee=ye[1],je=Object(a.useState)(!1),Oe=Object(c.a)(je,2),Se=Oe[0],ke=Oe[1],Ce=Object(a.useState)(!1),Ie=Object(c.a)(Ce,2),Pe=Ie[0],we=Ie[1],xe=function(){pe(!ge)},Ue=function(){we(!Pe)},Re=function(){Ee(!ve)},_e=function(){ke(!Se)},Ne=function(){var e=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t.length<=e;)t+=n.charAt(Math.floor(Math.random()*n.length));return t}(16),t="https://accounts.spotify.com/authorize?response_type=token&client_id="+encodeURIComponent("a4e259d0257745afb6d9bc995d65808d")+"&scope="+encodeURIComponent("user-top-read user-read-private user-read-email playlist-modify-public playlist-read-private")+"&redirect_uri="+encodeURIComponent("https://alexndesousa.github.io/simple-discovery/")+"&state="+encodeURIComponent(e);le(e),de(!1),window.location=t},Me=function(){var e=function(){for(var e={},t=window.location.hash.substring(1).split("&"),n=0;n<t.length;n++){var a=t[n].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}(),t={Authorization:" "+e.token_type+" "+e.access_token};ie(t)};Object(a.useEffect)((function(){console.log("hello from the useEffect thingy mabob"),Me()}),[]);var Te=Object(M.a)({root:{flexgrow:1},card:{maxWidth:345},media:{height:140},back_button:{left:"10%"}})(),Ve=function(e){x(e,re).then((function(t){U(e,t,re).then((function(e){console.log("artistIDs ",e),R(e,re).then((function(e){O(e,re,W).then((function(e){S(re,B).then((function(t){k(e,t,re).then((function(e){console.log("playlist created",e),ee(!0)}))}))}))}))}))}))},ze=function(e){j(e,re).then((function(e){O(e,re,W).then((function(e){S(re,B).then((function(t){k(e,t,re).then((function(e){console.log("playlist created",e),ee(!0)}))}))}))}))},Le=function(e,t){j(e,re).then((function(e){C(e,re).then((function(e){I(e,re).then((function(e){P(e,re).then((function(e){w(t,re).then((function(t){var n=e.filter((function(e){return e.tempo>.9*t.tempo&&e.tempo<1.1*t.tempo&&e.energy>.8*t.energy&&e.energy<1.2*t.energy&&e.valence>.8*t.valence&&e.valence<1.2*t.valence})).map((function(e){return e.uri}));S(re,B).then((function(e){k(n,e,re).then((function(e){console.log("playlist created",e),ee(!0)}))}))}))}))}))}))}))},Ae=z.map((function(e){return r.a.createElement(q,{key:e.id,id:[e.id],image:e.image,name:e.name,functionToExecute:Ve,isPlaylistCreated:Z})})),De=f.map((function(e){return r.a.createElement(q,{key:e.id,id:[e.id],image:e.image,name:e.name,functionToExecute:ze,isPlaylistCreated:Z})})),Fe=b.map((function(e){return r.a.createElement(q,{key:e.id,id:[e.artist_id,e.id],image:e.image,name:"".concat(e.name," - ").concat(e.artist),functionToExecute:Le,isPlaylistCreated:Z})})),Be=r.a.createElement(r.a.Fragment,null,ge?r.a.createElement(A.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,style:{minHeight:"80vh",margin:"0",width:"100%"}},r.a.createElement("h2",null,"Select an option from the list below"),r.a.createElement(A.a,{item:!0},r.a.createElement(Q.a,{variant:"contained",size:"large",onClick:function(){Ue(),xe()}},"import playlist")),r.a.createElement(A.a,{item:!0},r.a.createElement(Q.a,{variant:"contained",size:"large",onClick:function(){Re(),xe()}},"search artist")),r.a.createElement(A.a,{item:!0},r.a.createElement(Q.a,{variant:"contained",size:"large",onClick:function(){_e(),xe()}},"search song"))):null),Ge=r.a.createElement(r.a.Fragment,null,Pe?r.a.createElement("div",null,r.a.createElement(Y.a,{className:Te.back_button,onClick:function(){Ue(),xe()}},r.a.createElement($.a,{fontSize:"large"})),r.a.createElement(_,{header:re,setUserData:N,setUserPlaylists:L}),r.a.createElement(J,{musicItems:Ae})):null);return r.a.createElement("div",null,me?r.a.createElement("button",{onClick:function(){return Ne()}},"authenticate"):null,Be,Ge,r.a.createElement(te,{isPageVisible:ve,togglePage:Re,toggleMainMenu:xe,searchLabel:"Artist name",newSearch:n,handleSearch:function(e){i(e.target.value)},header:re,setValues:h,type:"artist",musicItems:De}),r.a.createElement(te,{isPageVisible:Se,togglePage:_e,toggleMainMenu:xe,searchLabel:"Song name",newSearch:s,handleSearch:function(e){u(e.target.value)},header:re,setValues:y,type:"song",musicItems:Fe}))};o.a.render(r.a.createElement(ne,null),document.getElementById("root"))},66:function(e,t,n){e.exports=n.p+"static/media/placeholder.f7c55a13.png"},76:function(e,t,n){e.exports=n(126)},81:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.3e6f8f6b.chunk.js.map